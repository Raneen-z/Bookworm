(this.webpackJsonpbookworm=this.webpackJsonpbookworm||[]).push([[0],{241:function(e,t,a){},243:function(e,t,a){},383:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a(0),o=a.n(n),r=a(42),s=a.n(r),l=(a(241),a(8)),i=(a(242),a(177),a(243),a(16)),u=a(12),d=a(212),j=a(403),b=a(404),h=a(385);function O(e){var t=Object(i.g)();return Object(c.jsxs)(j.a,{className:"color-main-nav",expand:"lg",children:[Object(c.jsx)(j.a.Brand,{style:{color:"#fce181"},children:"Bookworm"}),Object(c.jsx)(j.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(c.jsxs)(j.a.Collapse,{id:"basic-navbar-nav",children:[Object(c.jsx)(b.a,{className:"mr-auto",children:e.isLoggedIn?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(b.a.Link,{style:{color:"#9fedd7"},as:u.b,to:"/home",children:"Home"}),Object(c.jsx)(b.a.Link,{style:{color:"#9fedd7"},as:u.b,to:"/profile",children:"Profile"}),Object(c.jsx)(b.a.Link,{style:{color:"#9fedd7"},as:u.b,to:"/recommendations",children:"Recommendations"}),Object(c.jsx)(b.a.Link,{style:{color:"#9fedd7"},as:u.b,to:"/search",children:"Search"})]}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(b.a.Link,{style:{color:"#9fedd7"},as:u.b,to:"/",children:"Home"}),Object(c.jsx)(b.a.Link,{style:{color:"#9fedd7"},as:u.b,to:"/recommendations",children:"Recommendations"}),Object(c.jsx)(b.a.Link,{style:{color:"#9fedd7"},as:u.b,to:"/search",children:"Search"}),Object(c.jsx)(b.a.Link,{style:{color:"#9fedd7"},as:u.b,to:"/login",children:"Login"})]})}),e.isLoggedIn?Object(c.jsx)(h.a,{style:{backgroundColor:"#edeae5",color:"#026670"},onClick:function(){localStorage.removeItem("jwtToken"),t.push("/"),e.loginCallback()},variant:"",children:"Logout"}):Object(c.jsx)("div",{className:"btn-nav",children:Object(c.jsx)(h.a,{style:{backgroundColor:"#edeae5",color:"#026670"},as:u.b,to:"/signup",variant:"",children:"Signup"})})]})]})}var m=a(13),g=a.n(m),f=a(400),p=a(408),x={development:"http://localhost:".concat(5e3),production:"https://ibookworms.herokuapp.com"},v="localhost"===window.location.hostname?x.development:x.production,k=a(405),C=function(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),o=(a[0],a[1]),r=Object(n.useState)({}),s=Object(l.a)(r,2),i=s[0],d=s[1];Object(n.useEffect)((function(){g.a.get("https://www.googleapis.com/books/v1/volumes?q=".concat(e.review.bookId)).then((function(e){d(e.data.items[0]),o(!0)})).catch((function(e){return console.log(e)}))}),[]);return Object(c.jsxs)(k.a,{style:{borderBottom:"0.4px solid #bdbdbd"},className:"pb-3",children:[Object(c.jsx)(k.a.Avatar,{style:{width:"50px"},as:"a",src:e.review.reviewerId.avatar}),Object(c.jsxs)(k.a.Content,{className:"pl-5 ",children:[Object(c.jsxs)(k.a.Author,{as:"a",children:[e.review.reviewerId.name," "]}),Object(c.jsx)(k.a.Metadata,{children:Object(c.jsx)(k.a.Actions,{children:i.volumeInfo&&Object(c.jsxs)(u.b,{to:"books/".concat(e.review.bookId),children:["On ",i.volumeInfo.title]})})}),Object(c.jsx)(k.a.Text,{dangerouslySetInnerHTML:{__html:e.review.comment}}),e.auth.currentUser._id==e.review.reviewerId._id?Object(c.jsxs)(k.a.Actions,{children:[Object(c.jsx)("a",{onClick:function(){g.a.edit("".concat(v,"/api/review/editReview/").concat(e.review._id)).then((function(t){e.setChangeUseEffect()}))},children:"Edit"}),Object(c.jsx)("a",{onClick:function(){g.a.delete("".concat(v,"/api/review/removeReview/").concat(e.review._id)).then((function(t){e.setChangeUseEffect()}))},children:"Delete"})]}):null]})]})},w=function(e){var t=e.reviews.map((function(t){return Object(c.jsx)(C,{setChangeUseEffect:e.setChangeUseEffect,auth:e.auth,updateAuthCallBack:e.updateAuthCallBack,review:t})}));return Object(c.jsxs)(k.a.Group,{size:"large",className:" mt-5",children:[Object(c.jsx)(p.a,{as:"h3",dividing:!0,children:"Reviews"}),t]})},A=function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),o=a[0],r=a[1],s=Object(n.useState)(!1),i=Object(l.a)(s,2),d=i[0],j=i[1],b=Object(n.useState)(!1),O=Object(l.a)(b,2),m=O[0],x=O[1];return Object(n.useEffect)((function(){g.a.get("".concat(v,"/api/review/")).then((function(t){var a=t.data.reviews.filter((function(t){return e.auth.currentUser.following.some((function(e){return e._id===t.reviewerId._id}))||e.auth.currentUser._id===t.reviewerId._id}));a=a.reverse(),r(a),j(!0)})).catch((function(e){return console.log(e)}))}),[m]),Object(c.jsx)(f.a,{className:"mt-5 p-5 container-bg",children:d&&o.length?Object(c.jsx)(w,{auth:e.auth,reviews:o,setChangeUseEffect:function(){x(!m)},loginCallback:e.loginCallback,setAuthCallBack:e.ssetAuthCallBack,updateAuthCallBack:e.updateAuthCallBack}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(p.a,{as:"h1",dividing:!0,className:"p-3 pt-5 mb-3",children:"Search for your favourite books and sahre your first review!"}),Object(c.jsx)(h.a,{className:"m-5",as:u.b,to:"/search",children:"Search Book"}),Object(c.jsx)("h4",{className:"ml-5",children:"Enjoy reading.. "})]})})},y=a(409),E=a(221);function B(){return Object(c.jsx)(f.a,{textAlign:"center",className:"mt-5",children:Object(c.jsxs)(y.a,{columns:1,relaxed:"very",stackable:!0,children:[Object(c.jsx)(y.a.Column,{verticalAlign:"middle",children:Object(c.jsx)(E.a,{className:"img-landing",src:"https://lh3.googleusercontent.com/proxy/7DZ7rKFtULomqV4G2BiBhFqYnmGhM9-CT6winc5XjTJ4008hORqNPgpTR_qd4ZVp86XPMI7HWVT-Njr51VuLvJrF9t0kDJBMlPTLuPcV1YfN2OZ8tY11Hli3LlrwjLLA8753g75s"})}),Object(c.jsxs)(y.a.Column,{verticalAlign:"middle",inline:!0,className:"no-margin",children:[Object(c.jsx)(p.a,{size:"huge",className:"header-landing",children:"Welcome to Bookworm"}),Object(c.jsx)(p.a,{size:"medium",children:"Bookworm where you will find fun and learn .."}),Object(c.jsxs)("p",{className:"btns-landing",children:[Object(c.jsx)(h.a,{className:"btn-login-landing",style:{backgroundColor:"#026670",color:"#fce181",border:"#d8c3a5"},as:u.b,to:"/login",children:"Login"}),Object(c.jsx)(h.a,{className:"btn-signup-landing",style:{backgroundColor:"#026670",color:"#fce181",border:"#d8c3a5"},as:u.b,to:"/signup",variant:"primary",children:"Signup"})]})]})]})})}var S=a(47),N=a(37),I=a(410),U=a(173);function L(e){var t=Object(i.g)(),a=Object(n.useState)({email:"",password:""}),o=Object(l.a)(a,2),r=o[0],s=o[1],u=function(e){var t=e.target,a=t.name,c=t.value;s(Object(N.a)(Object(N.a)({},r),{},Object(S.a)({},a,c)))};return Object(c.jsx)(f.a,{textAlign:"center mt-5",children:Object(c.jsx)(I.a,{placeholder:!0,children:Object(c.jsx)(y.a,{columns:1,relaxed:"very",stackable:!0,children:Object(c.jsx)(y.a.Column,{children:Object(c.jsxs)(U.a,{children:[Object(c.jsx)(U.a.Input,{icon:"at",iconPosition:"left",label:"Email",name:"email",placeholder:"email@example.com",onChange:function(e){return u(e)}}),Object(c.jsx)(U.a.Input,{icon:"lock",iconPosition:"left",label:"Password",type:"password",name:"password",placeholder:"Password",onChange:function(e){return u(e)}}),Object(c.jsx)(h.a,{variant:"primary",type:"submit",onClick:function(a){return a.preventDefault(),void g.a.post("".concat(v,"/api/user/login"),r).then((function(a){var c=a.data.token;a.data.msg,c&&(localStorage.setItem("jwtToken",c),e.loginCallback(),t.push("/profile"))}))},children:"Login"})]})})})})})}var _=a(406),R=a(81),F=function(e){var t=Object(i.h)(),a=Object(n.useState)(e.book),o=Object(l.a)(a,2),r=o[0],s=o[1],d=Object(n.useState)(!1),j=Object(l.a)(d,2),b=j[0],O=j[1],m=r.volumeInfo;Object(n.useEffect)((function(){m?O(!0):(t=e.book,g.a.get("https://www.googleapis.com/books/v1/volumes?q=".concat(t)).then((function(e){if(!e.data.items)return O(!1);console.log(e),s(e.data.items[0]),O(!0)})))}),[]);return b&&r.volumeInfo&&Object(c.jsxs)(_.a,{children:[r.volumeInfo.imageLinks?Object(c.jsx)(_.a.Image,{src:r.volumeInfo.imageLinks.thumbnail}):Object(c.jsx)(_.a.Image,{}),Object(c.jsxs)(_.a.Content,{children:[Object(c.jsx)(_.a.Header,{as:u.b,to:"/books/".concat(r.id),children:r.volumeInfo.title}),Object(c.jsx)(_.a.Meta,{children:r.volumeInfo.authors?Object(c.jsx)("span",{className:"cinema",children:r.volumeInfo.authors[0]}):""}),Object(c.jsx)(_.a.Description,{children:r.volumeInfo.description}),Object(c.jsxs)(_.a.Extra,{children:[Object(c.jsxs)(h.a,{as:u.b,to:"/books/".concat(r.id),primary:!0,floated:"right",className:"mt-3",children:["Read Reviews",Object(c.jsx)(R.a,{name:"right chevron"})]}),e.auth.isLoggedIn?e.auth.currentUser.reads.includes(r.id)?Object(c.jsxs)(h.a,{onClick:function(){return t=r.id,console.log("remove reads"),void g.a.post("".concat(v,"/api/book/removeReads/").concat(e.auth.currentUser._id,"/").concat(t)).then((function(t){console.log(t.data.user),e.updateAuthCallBack(t.data.user),e.setChangeUseEffect()}));var t},negative:!0,floated:"right",className:"mt-3",children:["Reads",Object(c.jsx)(R.a,{name:"right minus"})]}):Object(c.jsxs)(h.a,{onClick:function(){return t=r.id,void g.a.post("".concat(v,"/api/book/addReads/").concat(e.auth.currentUser._id,"/").concat(t)).then((function(t){console.log(t.data.user),e.updateAuthCallBack(t.data.user),e.setChangeUseEffect()}));var t},positive:!0,floated:"right",className:"mt-3",children:["Reads",Object(c.jsx)(R.a,{name:"right plus"})]}):null,e.auth.isLoggedIn?e.auth.currentUser.wants_to_read.includes(r.id)?Object(c.jsxs)(h.a,{onClick:function(){return t=r.id,void g.a.post("".concat(v,"/api/book/removeToRead/").concat(e.auth.currentUser._id,"/").concat(t)).then((function(t){e.updateAuthCallBack(t.data.user),console.log(t.data.user),e.setChangeUseEffect()}));var t},negative:!0,floated:"right",className:"mt-3",children:["To-read",Object(c.jsx)(R.a,{name:"right minus"})]}):Object(c.jsxs)(h.a,{onClick:function(){return t=r.id,void g.a.post("".concat(v,"/api/book/addToRead/").concat(e.auth.currentUser._id,"/").concat(t)).then((function(t){console.log(t.data.user),e.updateAuthCallBack(t.data.user),e.setChangeUseEffect()}));var t},positive:!0,floated:"right",className:"mt-3",children:["To-read",Object(c.jsx)(R.a,{name:"right plus"})]}):null,e.auth.isLoggedIn&&"admin"===e.auth.currentUser.type?e.recommendation.includes(r.id)?Object(c.jsxs)(h.a,{onClick:function(){r.id},negative:!0,floated:"right",className:"mt-3",children:["Un-Recommend",Object(c.jsx)(R.a,{name:"right minus"})]}):Object(c.jsxs)(h.a,{onClick:function(){r.id},positive:!0,floated:"right",className:"mt-3",children:["Recommend",Object(c.jsx)(R.a,{name:"right plus"})]}):null,Object(c.jsx)("h5",{className:"mt-5 mb-2",children:"Check Stores:"}),Object(c.jsx)("a",{href:"https://www.jarir.com/catalogsearch/result/?order=priority&dir=asc&q=".concat(r.volumeInfo.title),target:"_blank",children:Object(c.jsx)(E.a,{src:"https://pbs.twimg.com/profile_images/1519843369/logo_400x400.png",avatar:!0})}),Object(c.jsx)("a",{href:"https://jamalon.com/en/catalogsearch/result/?q=".concat(r.volumeInfo.title),target:"_blank",children:Object(c.jsx)(E.a,{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRkCi7xwnpdrrL1TdVetN5vzEayoa7Wm94fJw&usqp=CAU",avatar:!0})}),Object(c.jsx)("a",{href:"".concat(r.volumeInfo.previewLink),target:"_blank",children:Object(c.jsx)(E.a,{src:"https://i.pinimg.com/originals/52/a2/5c/52a25c9fded18f23c6da89d7ac9b6d02.jpg",avatar:!0})})]})]})]})},T=function(e){var t=e.books.map((function(t){return t.bookId?Object(c.jsx)(F,{book:t.bookId,setChangeUseEffect:e.setChangeUseEffect,auth:e.auth,recommendations:e.recommendations,updateAuthCallBack:e.updateAuthCallBack}):Object(c.jsx)(F,{book:t,auth:e.auth,setChangeUseEffect:e.setChangeUseEffect,recommendations:e.recommendations,updateAuthCallBack:e.updateAuthCallBack})}));return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(p.a,{as:"h3",dividing:!0,children:e.heading}),Object(c.jsx)(_.a.Group,{divided:!0,children:t})]})},D=a(407),P=function(e){var t=Object(i.g)(),a=Object(n.useState)(!1),o=Object(l.a)(a,2),r=o[0],s=o[1];Object(n.useEffect)((function(){}),[r]);return Object(c.jsxs)(D.a,{children:[Object(c.jsx)(E.a,{style:{minHeight:"290px",maxHeight:"290px",backgroundColor:"white"},src:e.user.avatar,wrapped:!0,ui:!0}),Object(c.jsx)(D.a.Content,{children:Object(c.jsx)(D.a.Header,{style:{color:"#240a55"},children:e.user.name})}),Object(c.jsx)(D.a.Content,{extra:!0,children:e.auth.isLoggedIn?e.auth.currentUser._id!==e.user._id?e.auth.currentUser.following.some((function(t){return t._id===e.user._id}))?Object(c.jsx)(h.a,{onClick:function(){return a=e.auth.currentUser._id,c=e.user._id,void g.a.post("".concat(v,"/api/user/unfollow/").concat(a,"/").concat(c)).then((function(a){console.log(a.data.user),e.updateAuthCallBack(a.data.user),s(!r),t.push("/profile")}));var a,c},children:"Unfollow"}):Object(c.jsx)(h.a,{onClick:function(){return a=e.auth.currentUser._id,c=e.user._id,void g.a.post("".concat(v,"/api/user/follow/").concat(a,"/").concat(c)).then((function(a){console.log(a.data.user),e.updateAuthCallBack(a.data.user),s(!r),t.push("/profile")}));var a,c},children:"Follow"}):Object(c.jsx)(h.a,{children:"Edit Profile"}):null})]})},q=function(e){var t=e.users.map((function(t){return Object(c.jsx)(P,{loginCallback:e.loginCallback,user:t,auth:e.auth,updateAuthCallBack:e.updateAuthCallBack})}));return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(D.a.Group,{className:"marginzero",children:t})})},z=function(e){var t=Object(n.useState)("reads"),a=Object(l.a)(t,2),o=a[0],r=a[1],s=Object(n.useState)([]),i=Object(l.a)(s,2),u=i[0],d=i[1],j=Object(n.useState)(!1),b=Object(l.a)(j,2),O=b[0],m=b[1],x=Object(n.useState)(!1),k=Object(l.a)(x,2),C=k[0],A=k[1],E=function(){A(!C)};return Object(n.useEffect)((function(){g.a.get("".concat(v,"/api/review/user/").concat(e.auth.currentUser._id)).then((function(e){var t=e.data.reviews;t=t.reverse(),d(t),m(!0)})).catch((function(e){return console.log(e)}))}),[C]),Object(c.jsxs)(f.a,{className:"mt-5 p-5 container-bg",children:[Object(c.jsxs)(y.a,{children:[Object(c.jsx)(y.a.Column,{width:6,children:Object(c.jsx)(P,{user:e.auth.currentUser,auth:e.auth})}),Object(c.jsx)(y.a.Column,{width:10,className:"mt-5",children:Object(c.jsxs)(y.a,{columns:"equal",className:"mt-5",children:[Object(c.jsx)(y.a.Row,{children:Object(c.jsx)(y.a.Column,{children:"reviews"===o?Object(c.jsx)(h.a,{style:{backgroundColor:"#026670",color:"#EDEAE5"},onClick:function(){return r("reviews")},fluid:!0,children:"Reviews"}):Object(c.jsx)(h.a,{style:{backgroundColor:"#EDEAE5",color:"#026670"},onClick:function(){return r("reviews")},fluid:!0,children:"Reviews"})})}),Object(c.jsxs)(y.a.Row,{className:"mt-3",children:[Object(c.jsx)(y.a.Column,{children:"reads"===o?Object(c.jsx)(h.a,{style:{backgroundColor:"#026670",color:"#EDEAE5"},onClick:function(){return r("reads")},fluid:!0,children:"Reads"}):Object(c.jsx)(h.a,{style:{backgroundColor:"#EDEAE5",color:"#026670"},onClick:function(){return r("reads")},fluid:!0,children:"Reads"})}),Object(c.jsx)(y.a.Column,{children:"toRead"===o?Object(c.jsx)(h.a,{style:{backgroundColor:"#026670",color:"#EDEAE5"},onClick:function(){return r("toRead")},fluid:!0,children:"To-read"}):Object(c.jsx)(h.a,{style:{backgroundColor:"#EDEAE5",color:"#026670"},onClick:function(){return r("toRead")},fluid:!0,children:"To-read"})})]}),Object(c.jsxs)(y.a.Row,{className:"mt-3",children:[Object(c.jsx)(y.a.Column,{children:"following"===o?Object(c.jsx)(h.a,{style:{backgroundColor:"#026670",color:"#EDEAE5"},onClick:function(){return r("following")},fluid:!0,children:"Following"}):Object(c.jsx)(h.a,{style:{backgroundColor:"#EDEAE5",color:"#026670"},onClick:function(){return r("following")},fluid:!0,children:"Following"})}),Object(c.jsx)(y.a.Column,{children:"followers"===o?Object(c.jsx)(h.a,{style:{backgroundColor:"#026670",color:"#EDEAE5"},onClick:function(){return r("followers")},fluid:!0,children:"Followers"}):Object(c.jsx)(h.a,{style:{backgroundColor:"#EDEAE5",color:"#026670"},onClick:function(){return r("followers")},fluid:!0,children:"Followers"})})]})]})})]}),"reviews"===o&&O&&u.length?Object(c.jsx)(w,{auth:e.auth,reviews:u,setChangeUseEffect:E,loginCallback:e.loginCallback,setAuthCallBack:e.ssetAuthCallBack,updateAuthCallBack:e.updateAuthCallBack}):null,"reads"===o&&Object(c.jsx)(T,{books:e.auth.currentUser.reads,auth:e.auth,heading:"Reads list",setChangeUseEffect:E,updateAuthCallBack:e.updateAuthCallBack}),"toRead"===o&&Object(c.jsx)(T,{books:e.auth.currentUser.wants_to_read,auth:e.auth,heading:"To-read list",setChangeUseEffect:E,updateAuthCallBack:e.updateAuthCallBack}),"following"===o&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(p.a,{as:"h3",dividing:!0,children:"Following"}),Object(c.jsx)(q,{users:e.auth.currentUser.following,auth:e.auth,updateAuthCallBack:e.updateAuthCallBack})]}),"followers"===o&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(p.a,{as:"h3",dividing:!0,children:"Followers"}),Object(c.jsx)(q,{users:e.auth.currentUser.followers,auth:e.auth,updateAuthCallBack:e.updateAuthCallBack})]})]})},H=function(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),o=a[0],r=a[1];return Object(n.useEffect)((function(){}),[o]),Object(c.jsx)(f.a,{className:"mt-5 p-5 container-bg",children:Object(c.jsx)(y.a,{children:e.recommendations.length?Object(c.jsx)(T,{setChangeUseEffect:function(){r(!o)},updateAuthCallBack:e.updateAuthCallBack,books:e.recommendations,auth:e.auth,heading:"Our Recommendations"}):null})})},G=a(105),J=a.n(G),M=a(146);a(382),a(381),a(369);function V(e){var t=Object(i.g)(),a=Object(n.useState)({}),o=Object(l.a)(a,2),r=o[0],s=o[1],u=Object(n.useState)(!0),d=Object(l.a)(u,2),j=(d[0],d[1]),b=Object(n.useState)("https://res.cloudinary.com/bookwormcloud/image/upload/v1611699595/bookwormAvatar/cs4thogqix81sl7ybq4x.png"),O=Object(l.a)(b,2),m=O[0],p=O[1],x=Object(n.useState)(!1),v=Object(l.a)(x,2),k=v[0],C=v[1],w=function(){var e=Object(M.a)(J.a.mark((function e(t){var a,c;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.files,(c=new FormData).append("file",a[0]),c.append("upload_preset","bookwormAvatar"),C(!0),g.a.post("https://api.cloudinary.com/v1_1/bookwormcloud/image/upload",c).then((function(e){var t=e.data;p(t.secure_url),s(Object(N.a)(Object(N.a)({},r),{},{avatar:m})),C(!1)})).catch((function(e){console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(e){var t,a=e.target,c=a.name,n=a.value;s(Object(N.a)(Object(N.a)({},r),{},(t={},Object(S.a)(t,c,n),Object(S.a)(t,"avatar",m),t))),console.log(r)};return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(f.a,{textAlign:"center mt-5",children:Object(c.jsx)(I.a,{placeholder:!0,children:Object(c.jsxs)(y.a,{columns:1,relaxed:"very",stackable:!0,children:[Object(c.jsx)(y.a.Column,{textAlign:"center",children:k?Object(c.jsx)("h3",{children:"Loading..."}):Object(c.jsx)(E.a,{style:{border:"0.5px solid #8e8d8a"},src:m,size:"small",verticalAlign:"middle"})}),Object(c.jsx)(y.a.Column,{children:Object(c.jsxs)(U.a,{children:[Object(c.jsx)(U.a.Input,{icon:"user",iconPosition:"left",label:"Name",placeholder:"name",name:"name",required:!0,onChange:function(e){return A(e)}}),Object(c.jsx)(U.a.Input,{label:"Choose your image",type:"file",onChange:w}),Object(c.jsx)(U.a.Input,{icon:"at",iconPosition:"left",label:"Email",name:"email",placeholder:"email@example.com",onChange:function(e){return A(e)}}),Object(c.jsx)(U.a.Input,{icon:"lock",iconPosition:"left",label:"Password",type:"password",name:"password",placeholder:"Password",onChange:function(e){return A(e)}}),Object(c.jsx)(h.a,{variant:"primary",type:"submit",onClick:function(e){return a=e,console.log("reg"),a.preventDefault(),void(k||g.a.post("http://localhost:5000/api/user/register",r).then((function(e){e.data.user?t.push("/login"):setTimeout((function(){j(!1)}),1e3)})).catch((function(e){return console.log(e)})));var a},children:"Signup"})]})})]})})})})}var W=a(222),Y=a(401),Z=function(e){var t=Object(n.useState)("Book"),a=Object(l.a)(t,2),o=a[0],r=a[1],s=Object(n.useState)(""),i=Object(l.a)(s,2),u=i[0],d=i[1],j=Object(n.useState)([]),b=Object(l.a)(j,2),h=b[0],O=b[1],m=Object(n.useState)([]),p=Object(l.a)(m,2),x=p[0],k=p[1],C=Object(n.useState)(!1),w=Object(l.a)(C,2),A=w[0],E=w[1],B=Object(n.useState)(!1),S=Object(l.a)(B,2),N=S[0],I=S[1];Object(n.useEffect)((function(){}),[N]);var L=function(e,t){var a=t.value;r(a),k([]),O([]),E(!1)};return Object(c.jsx)(f.a,{className:"mt-5 pb-5 container-bg",children:Object(c.jsxs)(y.a,{className:"pl-5",children:[Object(c.jsx)(y.a.Row,{children:Object(c.jsx)(y.a.Column,{children:Object(c.jsxs)(U.a,{className:"m-5",children:[Object(c.jsx)(W.a,{icon:"search",placeholder:"Search...",type:"text",onChange:function(e){d(e.target.value)}}),Object(c.jsxs)(U.a.Field,{className:"mt-3 ml-5",children:["Search by: ",Object(c.jsx)("b",{children:o})]}),Object(c.jsx)(U.a.Field,{children:Object(c.jsx)(Y.a,{label:"Book",name:"radioGroup",value:"Book",checked:"Book"===o,onChange:L})}),Object(c.jsx)(U.a.Field,{children:Object(c.jsx)(Y.a,{label:"Account",name:"radioGroup",value:"Account",checked:"Account"===o,onChange:L})}),Object(c.jsx)(W.a,{type:"submit",value:"Submit",onClick:function(){O([]),k([]),"Book"===o?g.a.get("https://www.googleapis.com/books/v1/volumes?q=".concat(u)).then((function(e){console.log(e.data.items),k(e.data.items),E(!0)})).catch((function(e){return console.log(e)})):g.a.get("".concat(v,"/api/user/search/").concat(u)).then((function(e){console.log("search results: ",e.data.users),O(e.data.users),E(!0)})).catch((function(e){return console.log(e)}))}})]})})}),Object(c.jsx)(y.a.Row,{children:A?"Book"===o?x?Object(c.jsx)(T,{setChangeUseEffect:function(){I(!N)},recommendations:e.recommendations,updateAuthCallBack:e.updateAuthCallBack,books:x,auth:e.auth,heading:"Search results for ".concat(u)}):Object(c.jsxs)("h1",{children:["No result found for ",u," in books"]}):h.length?Object(c.jsx)(q,{updateAuthCallBack:e.updateAuthCallBack,users:h,auth:e.auth,heading:"Search for ".concat(u)}):Object(c.jsxs)("h1",{children:["No account found for ",u]}):Object(c.jsxs)("h1",{children:["Search by ",o]})})]})})},X=function(){return Object(c.jsx)(f.a,{className:"mt-5 p-5 container-bg margin-notFound",textAlign:"center",children:Object(c.jsxs)(y.a,{columns:2,relaxed:"very",stackable:!0,children:[Object(c.jsxs)(y.a.Column,{verticalAlign:"middle",inline:!0,className:"no-margin",children:[Object(c.jsx)(p.a,{size:"large",children:"Page Not Found"}),Object(c.jsx)(p.a,{size:"tiny",children:"We looked everywhere for this page"}),Object(c.jsx)(h.a,{className:"mt-4",style:{backgroundColor:"#EDEAE5",color:"#026670"},as:u.b,to:"/",content:"Go Back Home",primary:!0})]}),Object(c.jsx)(y.a.Column,{verticalAlign:"middle",children:Object(c.jsx)(E.a,{src:"https://res.cloudinary.com/bookwormcloud/image/upload/v1611433765/bookwormAvatar/hivvtie610mh8z0afein.png"})})]})})};a(402);function K(e){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("p",{style:{marginLeft:"600px",opacity:"0.5",paddingLeft:"10px",textAlign:"center",width:"800px",height:"300px",color:"rgb(2, 102, 112",fontSize:"24px",background:"white",marginTop:"100px",paddingTop:"80px"},children:"We provide many books in different fields. You have to login or signup to join bookworm world. You can leave your review to share it with others and see what others think. We wish you a good time"}),Object(c.jsx)("div",{style:{background:"#026670",width:"83vh",height:"15px",marginLeft:"600px",borderRadius:"5px"},children:" "}),Object(c.jsxs)("div",{style:{marginLeft:"600px",opacity:"0.5",paddingLeft:"10px",textAlign:"center",width:"800px",height:"300px",color:"rgb(2, 102, 112",fontSize:"30px",background:"white",marginTop:"20px",paddingTop:"90px"},children:["JOIN US NOW ",Object(c.jsx)(h.a,{as:u.b,to:"/signup",style:{color:"rgb(2, 102, 112",fontSize:"20px"},children:"Sign up"})," "]})]})}var Q=a(35),$=a(220);function ee(e){var t=Object(i.h)().id,a=Object(n.useState)(!1),o=Object(l.a)(a,2),r=o[0],s=o[1],u=Object(n.useState)(!1),d=Object(l.a)(u,2),j=d[0],b=d[1],h=Object(n.useState)({}),O=Object(l.a)(h,2),m=O[0],p=O[1],x=Object(n.useState)([]),k=Object(l.a)(x,2),C=k[0],A=k[1],y=Object(n.useState)(""),E=Object(l.a)(y,2),B=E[0],S=E[1],N=Object(n.useState)(!1),I=Object(l.a)(N,2),L=I[0],R=I[1];Object(n.useEffect)((function(){g.a.get("https://www.googleapis.com/books/v1/volumes?q=".concat(t)).then((function(e){p(e.data.items[0]),s(!0)})).catch((function(e){return console.log(e)})),g.a.get("".concat(v,"/api/review/book/").concat(t)).then((function(e){A(e.data.reviews),b(!0)})).catch((function(e){return console.log(e)}))}),[L]);var T=Object(c.jsxs)("span",{className:"ql-formats",children:[Object(c.jsx)("button",{className:"ql-bold","aria-label":"Bold"}),Object(c.jsx)("button",{className:"ql-italic","aria-label":"Italic"}),Object(c.jsx)("button",{className:"ql-underline","aria-label":"Underline"})]});return Object(c.jsx)(c.Fragment,{children:r&&j&&Object(c.jsx)(f.a,{className:"mt-5 pb-5",children:Object(c.jsxs)(_.a.Group,{divided:!0,children:[Object(c.jsx)(F,{updateAuthCallBack:e.updateAuthCallBack,book:m,loginCallback:e.loginCallback,auth:e.auth}),Object(c.jsx)(_.a,{children:Object(c.jsx)(_.a.Content,{children:Object(c.jsxs)(U.a,{onSubmit:function(a){return function(a){a.preventDefault(),g.a.post("http://localhost:5000/api/review/".concat(t,"/").concat(e.auth.currentUser._id),{comment:B}).then((function(e){A((function(t){return[].concat(Object(Q.a)(t),[e.data.review])}))})).catch((function(e){return console.log(e)}))}(a)},children:[Object(c.jsx)(_.a.Header,{className:"mt-2 ml-3",children:"Share your review"}),Object(c.jsx)($.Editor,{className:"mt-3 pb-4",style:{height:"250px",backgroundColor:"white"},value:B,onTextChange:function(e){return S(e.htmlValue)},headerTemplate:T}),Object(c.jsx)(U.a.Button,{content:"Submit"})]})})}),C.length?Object(c.jsx)(w,{updateAuthCallBack:e.updateAuthCallBack,setChangeUseEffect:function(){R(!L)},reviews:C,auth:e.auth}):null]})})})}function te(e){var t=Object(i.g)(),a=Object(n.useState)({}),o=Object(l.a)(a,2),r=o[0],s=o[1],u=Object(n.useState)(),d=Object(l.a)(u,2),j=(d[0],d[1]),b=Object(n.useState)(""),O=Object(l.a)(b,2),m=O[0],p=O[1],x=Object(n.useState)(!1),v=Object(l.a)(x,2),k=v[0],C=v[1],w=function(){var e=Object(M.a)(J.a.mark((function e(t){var a,c;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.files,(c=new FormData).append("file",a[0]),c.append("upload_preset","bookwormAvatar"),C(!0),g.a.post("https://api.cloudinary.com/v1_1/bookwormcloud/image/upload",c).then((function(e){var t=e.data;p(t.secure_url),s(Object(N.a)(Object(N.a)({},r),{},{avatar:m})),C(!1)})).catch((function(e){console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(e){var t,a=e.target,c=a.name,n=a.value;s(Object(N.a)(Object(N.a)({},r),{},(t={},Object(S.a)(t,c,n),Object(S.a)(t,"avatar",m),t)))};return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(f.a,{textAlign:"center mt-5",children:Object(c.jsx)(I.a,{placeholder:!0,children:Object(c.jsxs)(y.a,{columns:1,relaxed:"very",stackable:!0,children:[Object(c.jsx)(y.a.Column,{textAlign:"center",children:k?Object(c.jsx)("h3",{children:"Loading..."}):Object(c.jsx)(E.a,{src:m,size:"small",verticalAlign:"middle"})}),Object(c.jsx)(y.a.Column,{children:Object(c.jsxs)(U.a,{children:[Object(c.jsx)(U.a.Input,{icon:"user",iconPosition:"left",label:"Name",placeholder:"name",name:"name",required:!0,onChange:function(e){return A(e)}}),Object(c.jsx)(U.a.Input,{label:"Choose your image",type:"file",onChange:w}),Object(c.jsx)(U.a.Input,{icon:"lock",iconPosition:"left",label:"Password",type:"password",name:"password",placeholder:"Password",onChange:function(e){return A(e)}}),Object(c.jsx)(h.a,{variant:"primary",type:"submit",onClick:function(e){return e.preventDefault(),void(k||g.a.post("http://localhost:5000/api/user/update",r).then((function(e){e.data.user?t.push("/profile"):setTimeout((function(){j(!1)}),1e3)})).catch((function(e){return console.log(e)})))},children:"Edit "})]})})]})})})})}var ae=function(){Object(i.g)();var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)({currentUser:null,isLoggedIn:!1}),s=Object(l.a)(r,2),j=s[0],b=s[1],h=Object(n.useState)([]),m=Object(l.a)(h,2),f=m[0],p=m[1],x=function(e){b({currentUser:e,isLoggedIn:!0})},k=function(){if(localStorage.jwtToken){var e=localStorage.jwtToken,t=Object(d.a)(e,"overcooked").user;b({currentUser:t,isLoggedIn:!0})}else b({currentUser:null,isLoggedIn:!1});o(!0)};return Object(n.useEffect)((function(){g.a.get("".concat(v,"/api/book/recommendations")).then((function(e){p(e.data.recommendations),o(!0)})).catch((function(e){return console.log(e)})),k()}),[]),a&&Object(c.jsxs)(u.a,{children:[Object(c.jsx)(O,{loginCallback:k,isLoggedIn:j.isLoggedIn}),Object(c.jsxs)(i.d,{children:[Object(c.jsx)(i.b,{exact:!0,path:"/books/:id",children:j.isLoggedIn?Object(c.jsx)(ee,{auth:j,loginCallback:k,updateAuthCallBack:x}):Object(c.jsx)(i.a,{to:"/login",message:"You need to login"})}),Object(c.jsx)(i.b,{exact:!0,path:"/",children:j.isLoggedIn?Object(c.jsx)(A,{auth:j,loginCallback:k,setAuthCallBack:b,updateAuthCallBack:x}):Object(c.jsx)(B,{})}),Object(c.jsx)(i.b,{exact:!0,path:"/home",children:j.isLoggedIn?Object(c.jsx)(A,{auth:j,loginCallback:k,setAuthCallBack:b,updateAuthCallBack:x}):Object(c.jsx)(i.a,{to:"/"})}),Object(c.jsx)(i.b,{exact:!0,path:"/signup",children:Object(c.jsx)(V,{loginCallback:k})}),Object(c.jsx)(i.b,{exact:!0,path:"/login",children:Object(c.jsx)(L,{loginCallback:k})}),Object(c.jsx)(i.b,{exact:!0,path:"/profile",children:j.isLoggedIn?Object(c.jsx)(z,{auth:j,loginCallback:k,setAuthCallBack:b,updateAuthCallBack:x}):Object(c.jsx)(i.a,{to:"/login"})}),Object(c.jsx)(i.b,{exact:!0,path:"/recommendations",children:Object(c.jsx)(H,{recommendations:f,loginCallback:k,auth:j,updateAuthCallBack:x})}),Object(c.jsx)(i.b,{exact:!0,path:"/search",children:Object(c.jsx)(Z,{loginCallback:k,recommendations:f,auth:j,updateAuthCallBack:x})}),Object(c.jsx)(i.b,{path:"/about",children:Object(c.jsx)(K,{})}),Object(c.jsx)(i.b,{path:"/editprofile",children:Object(c.jsx)(te,{})}),Object(c.jsx)(i.b,{path:"*",children:Object(c.jsx)(X,{})})]})]})},ce=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,411)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,o=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),o(e),r(e)}))};s.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(ae,{})}),document.getElementById("root")),ce()}},[[383,1,2]]]);
//# sourceMappingURL=main.75bd09d5.chunk.js.map